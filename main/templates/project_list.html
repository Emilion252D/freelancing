{% extends 'base.html' %}
{% block title %}–°–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤{% endblock %}

{% block content %}
<h2 class="mb-4">üìã –í—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã</h2>

<!-- üîç –§–æ—Ä–º–∞ –ø–æ–∏—Å–∫–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ -->
<form method="get" class="row g-3 mb-4">
    <div class="col-md-4">
        <input type="text" name="q" class="form-control" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é"
               value="{{ search_query }}">
    </div>
    <div class="col-md-2">
        <input type="number" step="0.01" name="min_budget" class="form-control"
               placeholder="–ú–∏–Ω. –±—é–¥–∂–µ—Ç" value="{{ min_budget }}">
    </div>
    <div class="col-md-2">
        <input type="number" step="0.01" name="max_budget" class="form-control"
               placeholder="–ú–∞–∫—Å. –±—é–¥–∂–µ—Ç" value="{{ max_budget }}">
    </div>
    <div class="col-md-2">
        <button type="submit" class="btn btn-primary w-100"><i class="bi bi-search"></i> –ù–∞–π—Ç–∏</button>
    </div>
    <div class="col-md-2">
        <a href="{% url 'main:project_list' %}" class="btn btn-secondary w-100"><i class="bi bi-arrow-clockwise"></i> –°–±—Ä–æ—Å</a>
    </div>
</form>

<!-- üì¶ –°–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤ -->
{% if projects %}
<div class="row row-cols-1 row-cols-md-2 g-4">
    {% for project in projects %}
        <div class="col">
            <div class="card h-100 shadow-sm">
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">
                        <a href="{% url 'main:project_detail' project.pk %}" class="text-decoration-none">{{ project.title }}</a>
                    </h5>
                    <p class="card-text text-truncate">{{ project.description }}</p>

                    <ul class="list-unstyled small mt-3 mb-4">
                        <li><strong>–ë—é–¥–∂–µ—Ç:</strong> {{ project.budget }} ‚Ç∏</li>
                        <li><strong>–î–µ–¥–ª–∞–π–Ω:</strong> {{ project.deadline }}</li>
                        <li><strong>–ö–ª–∏–µ–Ω—Ç:</strong> {{ project.client.username }}
                            {% if project.client.is_client %}
                                <span class="badge bg-info">–ó–∞–∫–∞–∑—á–∏–∫</span>
                            {% elif project.client.is_freelancer %}
                                <span class="badge bg-success">–§—Ä–∏–ª–∞–Ω—Å–µ—Ä</span>
                            {% endif %}
                        </li>
                    </ul>

                    <a href="{% url 'main:project_detail' project.pk %}" class="btn btn-outline-primary mt-auto w-100">üîç –ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
                </div>
            </div>
        </div>
    {% endfor %}
</div>
{% else %}
    <p class="text-muted">–ù–µ—Ç –ø—Ä–æ–µ–∫—Ç–æ–≤ –ø–æ –∑–∞–¥–∞–Ω–Ω—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º.</p>
{% endif %}

<hr class="my-4">

<div class="text-end">
    <a class="btn btn-success" href="{% url 'main:create_project' %}">‚ûï –ù–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç</a>
    <a href="{% url 'main:dashboard' %}" class="btn btn-secondary mt-0">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
</div>
{% endblock %}


